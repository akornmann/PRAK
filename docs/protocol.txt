Protocole de communication Client <-> Serveur pour le projet réseau

Format du datagramme permettant la communication :

struct Datagram
{
	int code;
	int seq;
	char data[512];
};

(taille totale : 516 octets)


code = 0
Opération Toc Toc
Le numéro de séquence permet de vérifier qu'on a bien la réponse à la question...
la valeur de data n'a pas d'importance
Quand le client recoit Toc Toc, il répond Toc Toc au serveur.
Quand le serveur recoit Toc Toc, il répond Toc Toc au client.
Cette opération permet de vérifier si un serveur est opérationnel, ou si un client est toujours connecté.


Protocole d'échange de fichier
A demande un fichier à B

A :
code = 1
seq = -1
data = nom du fichier demandé

B :
code = 1
seq = taille du fichier
data = .

A :
code = 1
seq = 0
data = .

B :
code = 1
seq = seq précédente + taille de data
data = fichier partiel a envoyer
